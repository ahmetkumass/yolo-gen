# YoloGen Example: Car Detection
# Usage: python train.py --config configs/car_detection.yaml
#
# This is a complete working example. Copy and modify for your own dataset.

# ============================================================
# DATASET
# ============================================================
data: data/car_detection/dataset.yaml

# ============================================================
# YOLO TRAINING
# ============================================================
yolo:
  model: yolov8n.pt                # Options: yolov8n/s/m/l/x, yolo11n/s/m/l/x
  epochs: 100
  batch: 16
  imgsz: 640

  # Optimizer
  optimizer: auto
  lr0: 0.01
  lrf: 0.01
  momentum: 0.937
  weight_decay: 0.0005
  warmup_epochs: 3

  # Loss weights
  box: 7.5
  cls: 0.5
  dfl: 1.5

  # Augmentation
  hsv_h: 0.015
  hsv_s: 0.7
  hsv_v: 0.4
  degrees: 0.0
  translate: 0.1
  scale: 0.5
  fliplr: 0.5
  mosaic: 1.0
  mixup: 0.0
  erasing: 0.4
  close_mosaic: 10

  # Early stopping
  patience: 50

# ============================================================
# VLM TRAINING (Vision-Language Model)
# ============================================================
vlm:
  enabled: true                    # Set false to skip VLM training
  model: Qwen/Qwen2.5-VL-7B-Instruct
  epochs: 3
  batch_size: 1
  lr: 0.00001
  precision: 4bit                  # 4bit (QLoRA), 8bit, or fp16

  # LoRA parameters
  lora_r: 64
  lora_alpha: 16
  lora_dropout: 0.05

  # Memory optimization
  gradient_checkpointing: true
  gradient_accumulation: 4

# ============================================================
# VLM DATASET GENERATION
# ============================================================
vlm_dataset:
  # Box settings (BGR format for OpenCV)
  box_color: [0, 0, 255]           # Red=[0,0,255], Green=[0,255,0], Blue=[255,0,0]
  box_thickness: 3

  # System prompt (used in both training and inference)
  system_prompt: |
    You are a vehicle detection assistant.
    When shown an image with a red bounding box, identify and describe
    the vehicle inside the red marked area clearly and confidently.

  # Class-specific descriptions (improves VLM answers)
  details:
    car:
      - "The vehicle appears to be a passenger car."
      - "This is an automobile captured in the scene."
      - "A motor vehicle is present in the image."

# ============================================================
# OUTPUT
# ============================================================
output:
  save_dir: runs
  export_onnx: true
